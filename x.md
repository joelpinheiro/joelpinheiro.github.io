**Table of Contents**  *generated with [DocToc](http://doctoc.herokuapp.com/)*

- [Introduction](#)
	- [Objectives and Overview](#)
	- [Structure](#)
- [Requirements](#)
	- [Runtime Node Requirements](#)
- [State of the Art](#)
	- [Security in Runtime](#)
		- [Web Browsers](#)
			- [Monolithic vs Modular Architectures](#)
			- [Browser Extensions Security](#)
			- [XSS Detection Techniques](#)
			- [XSS (and Other Types) Prevention Techniques](#)
		- [Automated Analysis of Security-Critical JavaScript APIs](#)
		- [Secure Elements](#)
			- [Java Card: Internet Computing on a Smart Card](#)
			- [Cloud of Secure Elements](#)
			- [Defenses against Malicious Code](#)
			- [Getting malicious code on cards](#)
			- [Dynamic Countermeasures](#)
	- [Standards](#)
	- [Runtime](#)
	- [Messaging](#)
	- [Service Frameworks](#)
	- [Projects](#)
	- [Products](#)
		- [ApiRTC](#)
			- [What is ApiRTC?](#)
			- [Features Overview](#)
			- [Architecture Overview](#)
			- [Architecture](#)
			- [APIs](#)
			- [Requirements Analysis](#)
			- [Integration in Rethink](#)
		- [State of the art of current WebRTC solutions of Quobis](#)
			- [What is Sippo?](#)
			- [What is a “WebRTC Application Controller”?](#)
			- [Reference architecture](#)
			- [Understanding the role of a WebRTC Application Controller](#)
			- [Sippo interfaces and API’s](#)
				- [Sippo.js API](#)
				- [Sippo Service API (SAPI)](#)
				- [Sippo connectors](#)
				- [Sippo WebRTC API (WAPI)](#)
			- [Sippo internals: services and backends](#)
			- [1.7. Sippo WebRTC applications](#)
			- [Potential integration with Wonder proposal](#)
				- [About signaling-on-the-fly](#)
				- [Signaling-on-the-fly versus multi-signaling support](#)
			- [Requirements Analysis](#)
- [Hyperty Runtime Specification](#)
	- [Runtime Architecture](#)
		- [Service Provider Sandboxes](#)
			- [Hyperty](#)
			- [Policy Enforcer](#)
			- [Protocol Stub](#)
		- [Core Runtime](#)
			- [Message BUS](#)
			- [Policy Decision Point and Message BUS authorisation](#)
			- [Message BUS Policy Enforcement Point](#)
			- [Runtime Registry](#)
			- [Identity Module](#)
			- [Runtime User Agent](#)
			- [QoS User Agent](#)
		- [Native Runtime](#)
	- [Security analysis of the Hyperty Runtime](#)
		- [Introduction](#)
		- [Mitigated threats assuming an intact TCB](#)
			- [T1: Unauthorized access by client code](#)
			- [T2: Policy subversion](#)
			- [T3: Threats to client code authenticity](#)
			- [T4: Denial of service attacks](#)
		- [Vulnerability assessment of the Hyperty Runtime](#)
			- [Methodology](#)
			- [Browser platform](#)
			- [Standalone platform](#)
			- [M2M standalone platform](#)
	- [Runtime APIs](#)
		- [Runtime User Agent Interface](#)
			- [Local Device Runtime APIs](#)
				- [registerHyperty](#)
				- [loadHyperty](#)
				- [loadStub](#)
				- [checkForUpdate](#)
				- [discoverHiperty](#)
			- [External parties procedures](#)
		- [Runtime Registry Interface](#)
			- [init](#)
			- [registerHyperty](#)
			- [unregisterHyperty](#)
			- [registerStub](#)
			- [unregisterStub](#)
			- [registerPEP](#)
			- [unregisterPEP](#)
			- [onEvent](#)
			- [discoverProtostub](#)
			- [getSandbox](#)
			- [resolve](#)
		- [Message BUS Interface](#)
			- [postMessage](#)
			- [addListener](#)
			- [removeListener](#)
			- [addPEP](#)
			- [removePEP](#)
		- [Hyperty Interface](#)
			- [init](#)
			- [postMessage](#)
		- [Policy Enforcer Interface](#)
			- [init](#)
			- [postMessage](#)
		- [protoStub Interface](#)
			- [init](#)
			- [connect](#)
			- [disconnect](#)
			- [postMessage](#)
		- [Syncher](#)
			- [setSender](#)
			- [createAsObserver](#)
			- [createAsReporter](#)
			- [postMessage](#)
		- [Service Provider Sandbox interface](#)
			- [postMessage](#)
		- [Identity Module Interface](#)
			- [generateAssertion](#)
			- [validateAssertion](#)
		- [Core Policy Decision Point (PDP) Interface](#)
			- [addPolicies](#)
			- [removePolicies](#)
			- [authorise](#)
		- [Core Policy Enforcement Point (PEP) Interface](#)
			- [enforce](#)
		- [QoS User Agent Interface](#)
			- [getCurrentConnectivityStatistics](#)
			- [sendConnectivityStatisticsToBroker](#)
	- [Runtime Main Procedures](#)
		- [Runtime Basic Procedures](#)
			- [Deploy Hyperty Runtime](#)
			- [Deploy Protocol Stub](#)
			- [Deploy Hyperty {#header-identifiers-in-html-latex-and-context}](#)
			- [Message Routing in Message BUS](#)
			- [Intra-domain Local Communication](#)
			- [Intra-domain Remote Communication](#)
			- [Inter-domain Local Communication](#)
			- [Inter-domain Remote Communication](#)
		- [Runtime Identity Management Procedures](#)
			- [User Registration](#)
			- [Discovery](#)
				- [Prepare Discovery](#)
				- [Use Discovery](#)
			- [Domain Login](#)
			- [Associate User Identity to Hyperty Instance](#)
			- [User identity assertion](#)
		- [Main Runtime Procedures for H2H Communication](#)
			- [Main Runtime Procedures for Intra-domain H2H Communications](#)
				- [H2H Intradomain Communication - Alice invites Bob](#)
				- [H2H Intradomain Communication - Bob receives invitation](#)
				- [H2H Intradomain Communication - Invitation Acknowledgement](#)
				- [Incoming call is notified to Bob's application and Alice is updated](#)
				- [Bob starts WebRTC API](#)
				- [Synchronization of Alice's Data Object](#)
				- [H2H Interdomain Communication - create communication](#)
				- [H2H Interdomain Communication - Bob receives invitation](#)
				- [H2H Interdomain Communication - Invitation Acknowledgement](#)
				- [Incoming call is notified to Bob's application and Alice is updated](#)
				- [Bob starts WebRTC API](#)
				- [Synchronization of Alice's Data Object](#)
			- [M2M Device Bootstrap, Registration, Authorization](#)
			- [M2M Intra Communication : Context Discovery](#)
			- [M2M Intra Communication : PUB-SUB Communication](#)
	- [Runtime Implementation Considerations](#)
		- [Browser Runtime Implementation](#)
			- [General design considerations](#)
			- [Description of the proposed implementation design.](#)
				- [Service workers.](#)
					- [Hyperties and Protocol Stubs](#)
			- [Runtime Message Bus Core Component.](#)
			- [iFrames](#)
				- [How to send media stream from the reTHINK iFrame to the Web App.](#)
					- [Practical implementation](#)
		- [Considerations about the implementation of Runtime for standalone applications](#)
			- [Crosswalk](#)
			- [Crosswalk Architecture](#)
			- [cordova /Ionic / phonegap](#)
			- [Cordova functionnal schema](#)
			- [Cordova plugins](#)
			- [Some plugin examples](#)
				- [iosRTC](#)
				- [phoneRTC](#)
				- [Crosswalk-based Cordova Android](#)
			- [Cordova vs PhoneGap](#)
			- [Cordova vs Ionic](#)
			- [Webview](#)
				- [Webview WebRTC support](#)
				- [Crosswalk vs Webview](#)
			- [OpenWebRTC](#)
			- [Selected solutions for the implementation:](#)
				- [Solutions that have already been tested :](#)
					- [Android :](#)
					- [iOS :](#)
					- [Android & iOS :](#)
				- [Solution to be tested during the implementation :](#)
		- [Runtime implementation M2M standalone application](#)
			- [NodeJs Installation](#)
			- [Design](#)
			- [Code Snippets](#)
			- [Other evaluated runtimes](#)
- [Message Node Specification](#)
	- [Messaging Node Architecture](#)
		- [Core Functionalities](#)
			- [Message BUS](#)
			- [Access Control](#)
			- [Session Management](#)
			- [Address Allocation Management](#)
		- [Protocol Stub](#)
		- [Connectors](#)
	- [Vertx Specification](#)
		- [Core Functionalities](#)
			- [Pipeline](#)
			- [Session Management](#)
			- [Address Allocation Management](#)
			- [Access Control](#)
			- [Message BUS](#)
		- [Protocol Stub Sandbox](#)
		- [Connectors](#)
			- [End User Device Connector](#)
			- [Network Server Connector](#)
			- [Registry Connector](#)
			- [IdM Connector](#)
	- [NodeJs based Messaging Node Specification](#)
		- [Core Functionalities](#)
			- [Message BUS](#)
				- [Usage of Redis with NodeJs](#)
			- [Access Control](#)
			- [Session Management](#)
			- [Address Allocation Management](#)
			- [Protocol Stub & Connectors](#)
				- [IdM Connector](#)
				- [Registry Connector](#)
				- [End-User Device Connector](#)
				- [Network Server Connector](#)
				- [Node Sandbox framework](#)
		- [NodeJs implementation architecture](#)
	- [Matrix.org based Messaging Node Specification](#)
		- [Protocol Stub and Connectors](#)
			- [Matrix as Protocol-on-the-fly client](#)
			- [Matrix as Protocol-on-the-fly server](#)
			- [Connectors in Matrix](#)
		- [Core Functionalities](#)
			- [Message Bus](#)
			- [Access Control](#)
			- [Session Management](#)
				- [User session control](#)
				- [Communication session control](#)
				- [Stub and connector management](#)
			- [Address Allocation Management](#)
- [Conclusions](#)
- [References](#)